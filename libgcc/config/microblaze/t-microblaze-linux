# For C++ crtstuff
EXTRA_MULTILIB_PARTS = crtbegin$(objext) crtend$(objext)

LIB2ADD += \
        $(srcdir)/config/microblaze/divsi3.asm \
        $(srcdir)/config/microblaze/modsi3.asm \
        $(srcdir)/config/microblaze/muldi3_hard.asm \
        $(srcdir)/config/microblaze/mulsi3.asm \
        $(srcdir)/config/microblaze/stack_overflow_exit.asm \
        $(srcdir)/config/microblaze/udivsi3.asm \
        $(srcdir)/config/microblaze/umodsi3.asm \
        $(srcdir)/config/microblaze/divsi3_table.c

#       $(srcdir)/config/microblaze/moddi3.asm \ REDEFINITION FROM gcc/libgcc2.c

MULTILIB_OPTIONS = mxl-barrel-shift mno-xl-soft-mul mxl-multiply-high mlittle-endian
MULTILIB_DIRNAMES = bs m mh le
MULTILIB_EXCEPTIONS = *mxl-barrel-shift/mxl-multiply-high mxl-multiply-high
MULTILIB_EXCEPTIONS += *mxl-barrel-shift/mxl-multiply-high/mlittle-endian
MULTILIB_EXCEPTIONS += mxl-multiply-high/mlittle-endian

# Assemble startup files
$(T)crti$(objext): $(gcc_srcdir)/config/microblaze/crti.s
	$(GCC_FOR_TARGET) $(MULTILIB_CFLAGS) -c $(gcc_srcdir)/config/microblaze/crti.s -o $(T)crti$(objext)

$(T)crtn$(objext): $(gcc_srcdir)/config/microblaze/crtn.s
	$(GCC_FOR_TARGET) $(MULTILIB_CFLAGS) -c $(gcc_srcdir)/config/microblaze/crtn.s -o $(T)crtn$(objext)
